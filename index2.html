<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#0b0f10" />
    <title>4everevents ♾️ — Wedding & Photography</title>
    <meta name="description" content="4everevents ♾️ — Luxury wedding photography & films. Black / teal / light turquoise aesthetic. Timeless stories, artfully told." />

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

    <!-- Icons (Remix Icon v4) -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4/fonts/remixicon.css" rel="stylesheet" />

    <!-- Swiper v11 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

    <!-- Splitting.js CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/splitting@1.0.6/dist/splitting.css" />

    <style>
      :root {
        --black: #0b0f10;
        --black-2: #0e1417;
        --teal: #00a9a5;
        --turquoise: #40e0d0;
        --white: #eef7f7;
        --muted: rgba(238, 247, 247, 0.65);
        --glass: rgba(13, 17, 20, 0.65);
        --accent-grad: linear-gradient(135deg, var(--teal), var(--turquoise));
        --card-grad: radial-gradient(1000px 400px at 10% -20%, rgba(64, 224, 208, 0.18), transparent 60%), radial-gradient(900px 300px at 110% 120%, rgba(0, 169, 165, 0.15), transparent 60%);
        /* Card tuning variables */
        --card-padding: 28px;
        --service-icon-size: 52px;
        --card-tilt-rotate-x: 6; /* degrees */
        --card-tilt-rotate-y: 11; /* degrees */
        --card-elev: 0 34px 68px rgba(0,0,0,.48);
        --card-overlay-opacity: .12;
      }

      /* Reset */
      *, *::before, *::after { box-sizing: border-box; }
      html, body { height: 100%; }
      body {
        margin: 0;
        font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        color: var(--white);
        background:
          radial-gradient(1200px 800px at 80% -10%, rgba(64, 224, 208, 0.12), transparent 60%),
          radial-gradient(900px 500px at -10% 110%, rgba(0, 169, 165, 0.12), transparent 60%),
          var(--black);
        overflow-x: hidden;
      }

      img { max-width: 100%; display: block; height: auto; }
      a { color: inherit; text-decoration: none; }
      button { font: inherit; color: inherit; background: none; border: 0; cursor: pointer; }

      .container { width: min(1120px, 92vw); margin-inline: auto; }

      /* Accessibility focus rings */
      :focus-visible { outline: 2px solid rgba(64,224,208,.85); outline-offset: 3px; border-radius: 8px; }
      .btn:focus-visible { outline-offset: 4px; border-radius: 999px; }

      /* Buttons */
      .btn { display: inline-flex; align-items: center; gap: 10px; padding: 12px 20px; border-radius: 999px; transition: transform .2s ease, box-shadow .2s ease, background .2s ease; will-change: transform; }
      .btn-primary { background: var(--accent-grad); color: #001112; font-weight: 600; box-shadow: 0 10px 30px rgba(64, 224, 208, 0.2); }
      .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 14px 40px rgba(64, 224, 208, 0.32); }
      .btn-ghost { border: 1px solid rgba(64, 224, 208, .35); color: var(--white); backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px); }
      .btn-ghost:hover { background: rgba(64, 224, 208, 0.08); transform: translateY(-2px); }

      /* Preloader */
      #preloader {
        position: fixed; inset: 0; background: var(--black);
        display: grid; place-items: center; z-index: 9999;
        overflow: hidden;
      }
      .preloader-inner { display: grid; place-items: center; gap: 18px; text-align: center; }
      .preloader-inner .logo-mark { font-family: 'Playfair Display', serif; font-weight: 800; letter-spacing: .5px; font-size: clamp(22px, 3.2vw, 36px); }
      .preloader-inner .logo-mark .infinity { color: var(--turquoise); filter: drop-shadow(0 0 8px rgba(64,224,208,.45)); }
      .lottie-wrap, .infinity-wrap { width: 180px; height: 90px; }
      .lottie-wrap { display: grid; place-items: center; }
      .infinity-svg { width: 100%; height: 100%; filter: drop-shadow(0 6px 20px rgba(64,224,208,.25)); }
      .infinity-svg path.base { stroke: rgba(255,255,255,.08); stroke-width: 5; fill: none; }
      .infinity-svg path.runner {
        stroke: url(#grad); stroke-width: 5; fill: none; stroke-linecap: round;
        stroke-dasharray: 180 360; stroke-dashoffset: 0; animation: dash 1.4s ease-in-out infinite;
      }
      .progress-wrap { width: 240px; max-width: calc(100vw - 64px); height: 6px; background: rgba(255,255,255,.08); border-radius: 999px; overflow: hidden; position: relative; }
      .progress-bar { height: 100%; width: 0%; background: var(--accent-grad); border-radius: 999px; box-shadow: 0 4px 16px rgba(64,224,208,.25); }
      .progress-text { font-size: 12px; color: var(--muted); margin-top: 6px; letter-spacing: .12em; text-transform: uppercase; }
      @keyframes dash { 0% { stroke-dashoffset: 0; } 100% { stroke-dashoffset: -540; } }

      /* Header */
      .site-header { position: sticky; top: 0; z-index: 50; transition: background .3s ease, transform .3s ease, box-shadow .3s ease; }
      .site-header .container { display: flex; align-items: center; justify-content: space-between; padding: 16px 0; }
      .site-header::after { content: ""; position: absolute; inset: 0; background: linear-gradient(to bottom, rgba(0,0,0,.5), transparent); opacity: 0; transition: opacity .3s ease; pointer-events: none; }
      .site-header.is-scrolled { background: rgba(8, 12, 14, .6); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); box-shadow: 0 6px 30px rgba(0,0,0,.25); }
      .brand { display: inline-flex; align-items: center; gap: 10px; font-weight: 700; letter-spacing: .3px; }
      .brand span { color: var(--turquoise); filter: drop-shadow(0 0 8px rgba(64,224,208,.35)); }
      .nav { display: flex; align-items: center; gap: 10px; position: relative; }
      .nav-toggle { display: none; font-size: 22px; color: var(--white); }
      .nav ul { display: flex; align-items: center; gap: 18px; list-style: none; margin: 0; padding: 0; }
      .nav a { color: var(--muted); padding: 10px 12px; border-radius: 999px; transition: color .2s ease, background .2s ease; position: relative; }
      .nav a:hover { color: var(--white); background: rgba(255,255,255,.06); }
      .nav a.active, .nav a[aria-current="page"] { color: var(--white); }
      .nav a.active::after, .nav a[aria-current="page"]::after {
        content: ""; position: absolute; left: 12px; right: 12px; bottom: 6px; height: 2px; border-radius: 2px; background: var(--accent-grad);
      }
      .nav .btn { margin-left: 6px; }

      /* Hero */
      .hero { position: relative; min-height: 92vh; display: grid; align-items: center; }
      .hero-media { position: absolute; inset: 0; overflow: hidden; z-index: -1; }
      .hero-media img { width: 100%; height: 100%; object-fit: cover; filter: saturate(.8) brightness(.62) contrast(1.05); transform: scale(1.06); }
      .hero::before {
        content: ""; position: absolute; inset: 0;
        background: radial-gradient(1200px 600px at 70% 10%, rgba(64,224,208,.18), transparent 60%), linear-gradient(180deg, rgba(0,0,0,.45), rgba(0,0,0,.55));
        z-index: -1;
      }
      .hero-content { padding: clamp(72px, 10vh, 120px) 0; }
      .headline { font-family: 'Playfair Display', serif; font-weight: 800; line-height: 1.02; font-size: clamp(36px, 6vw, 78px); letter-spacing: .2px; text-shadow: 0 8px 40px rgba(0,0,0,.35); }
      .tagline { margin-top: 18px; color: var(--muted); font-size: clamp(15px, 1.6vw, 18px); max-width: 720px; }
      .cta { margin-top: 28px; display: flex; gap: 12px; flex-wrap: wrap; }
      .scroll-indicator { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); display: flex; flex-direction: column; align-items: center; gap: 6px; color: rgba(255,255,255,.7); font-size: 12px; letter-spacing: .2em; text-transform: uppercase; }
      .scroll-indicator i { animation: bounce 1.6s ease-in-out infinite; opacity: .8; }
      @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(6px); } }

      /* Sections */
      .section { padding: clamp(64px, 9vw, 110px) 0; position: relative; }
      .section-head { display: grid; gap: 10px; margin-bottom: 26px; }
      .section-head h2 { font-family: 'Playfair Display', serif; font-size: clamp(28px, 4vw, 42px); letter-spacing: .4px; }
      .section-head p { color: var(--muted); }

      /* Services - rethought cards */
      .services .cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 28px; align-items: start; }
      @media (max-width: 920px) { .services .cards { gap: 20px; } }
      @media (max-width: 620px) { .services .cards { grid-template-columns: 1fr; gap: 16px; } }

      .service-card {
        position: relative; display:block; border-radius: 18px; padding: calc(var(--card-padding) - 6px); min-height: 220px;
        overflow: visible; transition: transform .42s cubic-bezier(.2,.9,.2,1), box-shadow .42s cubic-bezier(.2,.9,.2,1), border-color .28s ease, opacity .4s ease;
        background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01)); border: 1px solid rgba(255,255,255,.06);
        -webkit-backdrop-filter: blur(6px); backdrop-filter: blur(6px);
        transform-origin: center center; cursor: pointer; box-shadow: 0 12px 30px rgba(0,0,0,.35);
        opacity: 0; transform: translateY(18px) scale(.996);
      }
      .service-card.in-view { opacity: 1; transform: translateY(0) scale(1); }
      .service-card:hover, .service-card:focus-within { transform: translateY(-8px) scale(1.01); box-shadow: var(--card-elev); border-color: rgba(64,224,208,.22); }

      /* internal layout */
      .service-card .card-inner { position: relative; display: flex; gap:16px; align-items:flex-start; }
      .service-card .card-media { width: 84px; height: 84px; flex: 0 0 84px; border-radius: 14px; display:grid; place-items:center; background: linear-gradient(180deg, rgba(64,224,208,.08), rgba(64,224,208,.02)); box-shadow: inset 0 0 0 1px rgba(64,224,208,.06); }
      .service-card .service-icon { width: var(--service-icon-size); height: var(--service-icon-size); border-radius: 12px; display:grid; place-items:center; color: var(--turquoise); font-size:22px; }
      .service-card .card-content { flex:1; }
      .service-card .title { margin:0; font-size:1.06rem; font-weight:700; }
      .service-card .desc { margin:6px 0 0; color:var(--muted); font-size:14px; line-height:1.4 }
      .service-card .card-cta { margin-top:12px; display:inline-flex; gap:8px; align-items:center; font-size:13px; color:var(--turquoise); text-decoration:none; }

      /* decorative blob and shine */
      .service-card .bg-blob { position:absolute; right:-12px; top:-18px; width:160px; height:160px; border-radius:50%; background: radial-gradient(circle at 30% 30%, rgba(64,224,208,.06), transparent 60%); pointer-events:none; mix-blend-mode: screen; opacity:.85; transform: translateZ(0); }
      .service-card .shine { position: absolute; inset: -30%; width: 160%; height: 160%; background: radial-gradient(closest-side, rgba(255,255,255,.04), transparent); pointer-events: none; transition: transform .22s ease; border-radius: inherit; }

      /* Alternative: Editorial service list with background reveal */
      .services { position: relative; overflow: hidden; }
      .services::before { content:""; position:absolute; inset:-2%; background-image: var(--services-bg, none); background-size: cover; background-position: center; filter: saturate(.95) contrast(1.05) brightness(.9) blur(2px); opacity:.22; transform: scale(1.06); transition: opacity .45s ease, transform .8s ease; z-index: -2; }
      .services::after { content:""; position:absolute; inset:0; background: linear-gradient(180deg, rgba(0,0,0,.28), rgba(0,0,0,.38)); z-index:-1; pointer-events:none; }
      .services.is-active::before { opacity:.42; transform: scale(1.02); }

      .services-reveal { display:grid; grid-template-columns: 1.05fr .95fr; gap:24px; align-items:start; }
      @media (max-width: 920px) { .services-reveal { grid-template-columns: 1fr; } }

      .service-list { display:grid; gap:12px; margin:0; padding:0; list-style:none; }
      .service-item { display:flex; gap:14px; width:100%; text-align:left; border-radius:16px; padding:14px 16px; background: rgba(12,16,18,.5); border:1px solid rgba(255,255,255,.06); color:var(--white); cursor:pointer; align-items:flex-start; transition: background .25s ease, border-color .25s ease, transform .25s cubic-bezier(.2,.9,.2,1), box-shadow .25s ease; position:relative; }
      .service-item:hover, .service-item:focus-visible, .service-item[aria-selected="true"] { background: rgba(12,16,18,.72); border-color: rgba(64,224,208,.28); transform: translateY(-2px); box-shadow: 0 12px 28px rgba(0,0,0,.35); }
      .service-item:focus-visible { outline: 2px solid rgba(64,224,208,.4); outline-offset: 3px; }
      .service-item .i { width:44px; height:44px; border-radius:12px; display:grid; place-items:center; color:var(--turquoise); background: rgba(64,224,208,.12); box-shadow: inset 0 0 0 1px rgba(64,224,208,.22); flex:0 0 auto; }
      .service-item .text { display:grid; gap:6px; padding-right:24px; }
      .service-item .label { font-weight:700; letter-spacing:.2px; }
      .service-item .desc { color:var(--muted); font-size:14px; max-width:54ch; }
      .service-item .chev { position:absolute; right:10px; top:50%; transform: translateY(-50%) translateX(0); color: var(--turquoise); opacity:.85; transition: transform .25s ease; }
      .service-item:hover .chev, .service-item[aria-selected="true"] .chev { transform: translateY(-50%) translateX(3px); }

      .service-viewport { position:relative; border-radius:18px; overflow:hidden; border:1px solid rgba(255,255,255,.08); min-height:320px; background: rgba(12,16,18,.5); }
      .service-viewport .img { position:absolute; inset:0; background-size:cover; background-position:center; opacity:0; transform: scale(1.04); transition: opacity .6s ease, transform 1.2s ease; will-change: opacity, transform; }
      .service-viewport .img.is-active { opacity:1; transform: scale(1); }
      .service-viewport .overlay { position:absolute; inset:0; background: linear-gradient(180deg, rgba(0,0,0,.02), rgba(0,0,0,.55)); pointer-events:none; }
      .service-viewport .caption { position:absolute; left:14px; right:14px; bottom:14px; display:grid; gap:6px; padding:10px 12px; background: rgba(10,14,16,.52); border:1px solid rgba(255,255,255,.08); border-radius:12px; -webkit-backdrop-filter: blur(8px); backdrop-filter: blur(8px); }
      .service-viewport .caption .t { font-weight:700; }
      .service-viewport .caption .d { color:var(--muted); font-size:14px; }

      /* Motion preferences */
      @media (prefers-reduced-motion: reduce) {
        .service-item, .service-viewport .img, .services::before { transition: none !important; }
      }
      .service-card::before {
        content: ""; position: absolute; inset: 0; border-radius: inherit; padding: 1px; background: var(--accent-grad);
        -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
        mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
        -webkit-mask-composite: xor; mask-composite: exclude; opacity: .2; pointer-events: none; transition: opacity .3s ease;
      }
      .service-card:hover { transform: translateY(-6px) scale(1.01); box-shadow: 0 25px 60px rgba(0,0,0,.35); border-color: rgba(64,224,208,.35); }
      .service-card:hover::before { opacity: .42; }
      .service-icon { width: var(--service-icon-size); height: var(--service-icon-size); border-radius: 12px; background: rgba(64,224,208,.12); display: grid; place-items: center; margin-bottom: 14px; color: var(--turquoise); box-shadow: inset 0 0 0 1px rgba(64,224,208,.22); }
      .service-card h3 { margin: 4px 0 6px; font-size: 18px; letter-spacing: .3px; }
      .service-card p { margin: 0; color: var(--muted); font-size: 14px; }
      .shine { position: absolute; top: -120%; left: -120%; width: 240%; height: 240%; background: radial-gradient(closest-side, rgba(64,224,208,.18), transparent); transform: translate3d(0,0,0); pointer-events: none; transition: transform .2s ease; }
      /* Modern interaction additions */
      .service-card.is-tilting { box-shadow: 0 30px 60px rgba(0,0,0,.45); }
      .service-card { display:flex; flex-direction:column; justify-content:flex-start; gap:12px; padding:26px; }
      .service-card .meta { display:block; transition: transform .28s cubic-bezier(.2,.9,.2,1), opacity .28s ease; }
      .service-card .service-icon { transition: transform .28s cubic-bezier(.2,.9,.2,1), box-shadow .28s ease; }
      .service-card:hover .service-icon, .service-card:focus .service-icon { transform: scale(1.06) translateY(-2px); box-shadow: 0 6px 18px rgba(0,0,0,.35) inset; }
      .service-card:hover .meta, .service-card:focus .meta { transform: translateY(-6px); }
      .service-card .title { font-weight:700; font-size:1.05rem; }
      .service-card .desc { color:var(--muted); font-size:14px; margin-top:4px; }
      .service-card::after { content: ""; position: absolute; inset: 0; border-radius: inherit; pointer-events: none; background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.06)); mix-blend-mode: overlay; opacity: .12; }
      .service-card:active { transform: translateY(2px) scale(.997); }
      .service-card:focus-visible { outline: 3px solid rgba(64,224,208,.18); outline-offset: 6px; border-color: rgba(64,224,208,.28); }
      /* Reduced-motion friendly defaults */
      @media (prefers-reduced-motion: reduce) {
        .service-card, .service-card .service-icon, .shine, .service-card .meta { transition: none !important; transform: none !important; }
      }

      /* Gallery / Swiper */
      .gallery { position: relative; }
      .swiper { width: 100%; padding: 16px 0 42px; }
      .swiper-slide { width: clamp(240px, 30vw, 420px); }
      .slide-card { position: relative; border-radius: 18px; overflow: hidden; box-shadow: 0 20px 60px rgba(0,0,0,.35); background: #0d1214; }
      .slide-card img { width: 100%; height: clamp(260px, 40vw, 480px); object-fit: cover; filter: saturate(1.05) contrast(1.03); }
      .blur-up { filter: blur(14px); transform: scale(1.04); transition: filter .6s ease, transform .6s ease; }
      .is-loaded { filter: blur(0); transform: scale(1); }
      .slide-caption { position: absolute; left: 12px; bottom: 12px; padding: 8px 12px; border-radius: 12px; background: rgba(11, 15, 16, .55); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); font-size: 13px; color: var(--muted); border: 1px solid rgba(255,255,255,.08); }
      .swiper-button-prev, .swiper-button-next { color: var(--white); }
      .swiper-pagination-bullet { background: rgba(255,255,255,.4); }
      .swiper-pagination-bullet-active { background: var(--turquoise); }

      /* Film (Plyr) */
      .film .player-wrapper { position: relative; aspect-ratio: 16 / 9; border-radius: 16px; overflow: hidden; box-shadow: 0 30px 80px rgba(0,0,0,.45); border: 1px solid rgba(255,255,255,.06); background: #0d1214; }
      .plyr--video { --plyr-color-main: #40e0d0; }
      .player-wrapper video, .player-wrapper .plyr { width: 100%; height: 100%; }
      .player-wrapper video { object-fit: cover; display: block; background: #000; }
      .video-fallback { position: absolute; inset: 0; display: none; align-items: center; justify-content: center; gap: 10px; background: rgba(0,0,0,.6); color: #fff; font-size: 14px; }
      .video-fallback a { color: var(--turquoise); text-decoration: underline; }

      /* Highlights Masonry */
      .highlights .masonry-grid { margin: -10px; }
      .highlights .masonry-sizer, .highlights .masonry-item { width: 33.333%; }
      .highlights .masonry-item { padding: 10px; }
      @media (max-width: 920px) { .highlights .masonry-sizer, .highlights .masonry-item { width: 50%; } }
      @media (max-width: 620px) { .highlights .masonry-sizer, .highlights .masonry-item { width: 100%; } }
      .highlight-card { position: relative; border-radius: 16px; overflow: hidden; background: #0e1417; border: 1px solid rgba(255,255,255,.06); box-shadow: 0 20px 60px rgba(0,0,0,.35); }
      .highlight-card img { width: 100%; height: auto; display: block; }
      .highlight-badge { position: absolute; top: 10px; left: 10px; background: rgba(10,14,16,.55); border: 1px solid rgba(255,255,255,.08); color: var(--muted); font-size: 12px; padding: 6px 10px; border-radius: 999px; backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px); }

      /* Story */
      .story .grid { display: grid; grid-template-columns: 1.2fr .8fr; gap: 26px; align-items: center; }
      @media (max-width: 920px) { .story .grid { grid-template-columns: 1fr; } }
      .story .frame { position: relative; border-radius: 16px; overflow: hidden; background: #0e1417; border: 1px solid rgba(255,255,255,.06); }
      .story .frame img { width: 100%; height: 100%; object-fit: cover; filter: saturate(.95); }
      .story p { color: var(--muted); }

      /* Contact CTA */
      .contact { text-align: center; }
      .contact .cta-grid { display: grid; gap: 18px; place-items: center; }
      .contact h3 { font-family: 'Playfair Display', serif; font-size: clamp(24px, 3vw, 32px); }
      .contact .sub { color: var(--muted); max-width: 720px; }

      /* Footer */
      footer { padding: 28px 0; border-top: 1px solid rgba(255,255,255,.06); color: rgba(255,255,255,.7); font-size: 14px; }
      .footer-grid { display: flex; align-items: center; justify-content: space-between; gap: 12px; flex-wrap: wrap; }
      .social { display: flex; gap: 10px; }
      .social a { width: 36px; height: 36px; display: grid; place-items: center; border-radius: 999px; background: rgba(255,255,255,.06); color: var(--white); }
      .social a:hover { background: rgba(64,224,208,.18); color: var(--turquoise); }

      /* Top scroll progress bar */
      #scrollbar { position: fixed; top: 0; left: 0; height: 3px; width: 0%; z-index: 60; background: var(--accent-grad); box-shadow: 0 6px 16px rgba(64,224,208,.32); transition: width .1s linear; }

      /* Back to top FAB */
      #toTop { position: fixed; right: 18px; bottom: 18px; width: 46px; height: 46px; display: grid; place-items: center; border-radius: 999px; background: rgba(10,14,16,.75); border: 1px solid rgba(255,255,255,.1); color: var(--white); z-index: 55; opacity: 0; transform: translateY(10px); pointer-events: none; transition: opacity .25s ease, transform .25s ease, background .2s ease; }
      #toTop.show { opacity: 1; transform: translateY(0); pointer-events: auto; }
      #toTop:hover { background: rgba(64,224,208,.18); color: var(--turquoise); }

      /* Mobile sticky CTA */
      .mobile-cta { position: fixed; left: 12px; right: 12px; bottom: 12px; z-index: 54; display: none; }
      .mobile-cta .bar { display: flex; gap: 10px; justify-content: center; background: rgba(10,14,16,.85); border: 1px solid rgba(255,255,255,.08); border-radius: 999px; padding: 10px; backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); box-shadow: 0 12px 40px rgba(0,0,0,.35); }
      @media (max-width: 680px) { .mobile-cta { display: block; } }

      /* Lightbox */
      #lightbox { position: fixed; inset: 0; background: rgba(0,0,0,.8); display: grid; place-items: center; z-index: 70; opacity: 0; pointer-events: none; transition: opacity .25s ease; }
      #lightbox.show { opacity: 1; pointer-events: auto; }
      #lightbox img { max-width: 92vw; max-height: 86vh; border-radius: 14px; box-shadow: 0 30px 80px rgba(0,0,0,.5); }
      #lightbox .close { position: absolute; top: 14px; right: 14px; width: 42px; height: 42px; display: grid; place-items: center; border-radius: 999px; background: rgba(255,255,255,.1); color: #fff; border: 1px solid rgba(255,255,255,.18); }

      /* Mobile Nav */
      @media (max-width: 860px) {
        .nav-toggle { display: inline-grid; place-items: center; }
        .nav ul { position: absolute; top: 66px; right: 16px; left: 16px; background: rgba(10,14,16,.85); border: 1px solid rgba(255,255,255,.06); border-radius: 14px; padding: 14px; backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); display: grid; gap: 4px; transform-origin: top right; transform: scale(.98); opacity: 0; pointer-events: none; transition: opacity .2s ease, transform .2s ease; }
        .nav ul.show { opacity: 1; transform: scale(1); pointer-events: auto; }
        .nav .btn { width: 100%; justify-content: center; }
      }

      /* Scrollbar (WebKit) */
      ::-webkit-scrollbar { width: 12px; height: 12px; }
      ::-webkit-scrollbar-thumb { background: linear-gradient(180deg, rgba(64,224,208,.55), rgba(0,169,165,.55)); border-radius: 999px; border: 3px solid rgba(0,0,0,.2); }
      ::-webkit-scrollbar-track { background: rgba(255,255,255,.04); }

      /* Reduced motion */
      @media (prefers-reduced-motion: reduce) {
        * { animation: none !important; transition: none !important; }
      }
    </style>
  </head>
  <body>
    <noscript><style>#preloader{display:none!important}</style></noscript>
    <script>
      // Absolute failsafe: ensure preloader disappears even if other scripts fail
      (function(){
        function killPreloader(){
          var p = document.getElementById('preloader');
          if (!p) return;
          p.style.opacity = '0';
          p.style.pointerEvents = 'none';
          try { p.parentNode && p.parentNode.removeChild(p); } catch(_) {}
        }
        // Remove after DOM ready or max 4s
        document.addEventListener('DOMContentLoaded', function(){ setTimeout(killPreloader, 3500); });
        setTimeout(killPreloader, 4000);
      })();
    </script>
    <!-- Preloader -->
    <div id="preloader" aria-hidden="true">
      <div class="preloader-inner">
        <div class="logo-mark">4everevents <span class="infinity">♾️</span></div>
        <div class="lottie-wrap" id="lottieLoader" aria-hidden="true"></div>
        <div class="infinity-wrap" aria-hidden="true" data-fallback>
          <svg class="infinity-svg" viewBox="0 0 160 80" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Loading">
            <defs>
              <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="#40e0d0" />
                <stop offset="100%" stop-color="#00a9a5" />
              </linearGradient>
            </defs>
            <!-- Infinity curve -->
            <path class="base" d="M20,40 C20,15 60,15 80,40 C100,65 140,65 140,40 C140,15 100,15 80,40 C60,65 20,65 20,40 Z"/>
            <path class="runner" d="M20,40 C20,15 60,15 80,40 C100,65 140,65 140,40 C140,15 100,15 80,40 C60,65 20,65 20,40 Z" />
          </svg>
        </div>
        <div class="progress-wrap" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
          <div class="progress-bar"></div>
        </div>
        <div class="progress-text" aria-live="polite">0%</div>
      </div>
    </div>

    <!-- Top scroll progress bar -->
    <div id="scrollbar" aria-hidden="true"></div>

    <!-- Header -->
    <header class="site-header" id="header">
      <div class="container">
        <a href="#home" class="brand">4everevents <span>♾️</span></a>
        <nav class="nav" aria-label="Primary">
          <button class="nav-toggle" id="navToggle" aria-expanded="false" aria-controls="navMenu">
            <i class="ri-menu-3-line"></i>
          </button>
          <ul id="navMenu">
            <li><a href="#portfolio">Portfolio</a></li>
            <li><a href="#services">Services</a></li>
            <li><a href="#story">About</a></li>
            <li><a href="#contact" class="btn btn-primary"><i class="ri-calendar-event-line"></i> Book us</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <!-- Hero -->
    <section class="hero" id="home">
      <div class="hero-media" aria-hidden="true">
        <img data-preload src="./images/Image 11.jpg" alt="Wedding couple embracing under lights"/>
      </div>
      <div class="hero-content container">
        <h1 class="headline" data-splitting>Timeless stories, <br/>artfully told.</h1>
        <p class="tagline">Luxury wedding photography & films, crafted for the modern romantics. Black / teal / light turquoise — an aesthetic of clarity, emotion, and light.</p>
        <div class="cta">
          <a href="#portfolio" class="btn btn-primary"><i class="ri-image-2-line"></i> View portfolio</a>
          <a href="#contact" class="btn btn-ghost"><i class="ri-chat-1-line"></i> Enquire now</a>
        </div>
      </div>
      <div class="scroll-indicator" aria-hidden="true">
        <span>Scroll</span>
        <i class="ri-arrow-down-line"></i>
      </div>
    </section>

    <!-- Services -->
    <section id="services" class="section services">
      <div class="container">
        <div class="section-head">
          <h2 data-splitting>What we create</h2>
          <p>From intimate vows to grand celebrations — we document every breath of your day in luminous color and elegant contrast.</p>
        </div>
        <div class="services-reveal" id="servicesReveal">
          <ul class="service-list" role="tablist" aria-label="Services">
            <li>
              <button class="service-item" role="tab" aria-selected="true" data-bg="./images/Image 11.jpg" data-title="Weddings" data-desc="Editorial storytelling that blends fine-art composition with genuine emotion.">
                <span class="i"><i class="ri-heart-3-line"></i></span>
                <span class="text">
                  <span class="label">Weddings</span>
                  <span class="desc">Editorial storytelling that blends fine-art composition with genuine emotion.</span>
                </span>
                <span class="chev" aria-hidden="true"><i class="ri-arrow-right-line"></i></span>
              </button>
            </li>
            <li>
              <button class="service-item" role="tab" aria-selected="false" data-bg="./images/Image 18.jpg" data-title="Engagements" data-desc="Sun-kissed sessions tailored to your story — elegant, candid, and full of light.">
                <span class="i"><i class="ri-sparkling-2-line"></i></span>
                <span class="text">
                  <span class="label">Engagements</span>
                  <span class="desc">Sun-kissed sessions tailored to your story — elegant, candid, and full of light.</span>
                </span>
                <span class="chev" aria-hidden="true"><i class="ri-arrow-right-line"></i></span>
              </button>
            </li>
            <li>
              <button class="service-item" role="tab" aria-selected="false" data-bg="./images/Image 19.jpg" data-title="Cinematic Films" data-desc="Movement and music woven into time — a film you’ll feel forever.">
                <span class="i"><i class="ri-film-line"></i></span>
                <span class="text">
                  <span class="label">Cinematic Films</span>
                  <span class="desc">Movement and music woven into time — a film you’ll feel forever.</span>
                </span>
                <span class="chev" aria-hidden="true"><i class="ri-arrow-right-line"></i></span>
              </button>
            </li>
            <li>
              <button class="service-item" role="tab" aria-selected="false" data-bg="./images/Image 21.jpg" data-title="Editorial Portraits" data-desc="Magazine-grade portraits — refined details, luminous skin tones, pristine styling.">
                <span class="i"><i class="ri-camera-lens-line"></i></span>
                <span class="text">
                  <span class="label">Editorial Portraits</span>
                  <span class="desc">Magazine-grade portraits — refined details, luminous skin tones, pristine styling.</span>
                </span>
                <span class="chev" aria-hidden="true"><i class="ri-arrow-right-line"></i></span>
              </button>
            </li>
            <li>
              <button class="service-item" role="tab" aria-selected="false" data-bg="./images/Image 23.jpg" data-title="Destination" data-desc="From Amalfi to Kyoto — we travel worldwide to craft memories in dream light.">
                <span class="i"><i class="ri-sun-foggy-line"></i></span>
                <span class="text">
                  <span class="label">Destination</span>
                  <span class="desc">From Amalfi to Kyoto — we travel worldwide to craft memories in dream light.</span>
                </span>
                <span class="chev" aria-hidden="true"><i class="ri-arrow-right-line"></i></span>
              </button>
            </li>
            <li>
              <button class="service-item" role="tab" aria-selected="false" data-bg="./images/Image 7.jpg" data-title="Luxury Albums" data-desc="Museum-grade prints and hand-bound albums designed to last generations.">
                <span class="i"><i class="ri-vip-diamond-line"></i></span>
                <span class="text">
                  <span class="label">Luxury Albums</span>
                  <span class="desc">Museum-grade prints and hand-bound albums designed to last generations.</span>
                </span>
                <span class="chev" aria-hidden="true"><i class="ri-arrow-right-line"></i></span>
              </button>
            </li>
          </ul>
          <div class="service-viewport" role="tabpanel" aria-live="polite">
            <div class="img is-active" style="background-image:url('./images/Image 11.jpg')"></div>
            <div class="img" style="background-image:url('./images/Image 18.jpg')"></div>
            <div class="img" style="background-image:url('./images/Image 19.jpg')"></div>
            <div class="img" style="background-image:url('./images/Image 21.jpg')"></div>
            <div class="img" style="background-image:url('./images/Image 23.jpg')"></div>
            <div class="img" style="background-image:url('./images/Image 7.jpg')"></div>
            <div class="overlay" aria-hidden="true"></div>
            <div class="caption" aria-live="polite">
              <div class="t">Weddings</div>
              <div class="d">Editorial storytelling that blends fine-art composition with genuine emotion.</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Gallery -->
    <section id="portfolio" class="section gallery">
      <div class="container">
        <div class="section-head">
          <h2 data-splitting>Featured stories</h2>
          <p>Swipe through our recent weddings and sessions — color, motion, and connection.</p>
        </div>
      </div>

      <div class="swiper" id="gallerySwiper" aria-label="Featured gallery slider">
        <div class="swiper-wrapper">
          <div class="swiper-slide">
            <a data-pswp-item href="./images/Image 11.jpg" data-pswp-width="2000" data-pswp-height="1334">
              <figure class="slide-card">
                <img data-preload src="./images/Image 11.jpg" alt="Bride and groom under golden hour light" />
                <figcaption class="slide-caption">Golden hour vows</figcaption>
              </figure>
            </a>
          </div>
          <div class="swiper-slide">
            <a data-pswp-item href="./images/Image 18.jpg" data-pswp-width="2000" data-pswp-height="1334">
              <figure class="slide-card">
                <img data-preload src="./images/Image 18.jpg" alt="Intimate first dance" />
                <figcaption class="slide-caption">The first dance</figcaption>
              </figure>
            </a>
          </div>
          <div class="swiper-slide">
            <a data-pswp-item href="./images/Image 19.jpg" data-pswp-width="2000" data-pswp-height="1334">
              <figure class="slide-card">
                <img data-preload src="./images/Image 19.jpg" alt="Wedding party celebrating" />
                <figcaption class="slide-caption">Joy in motion</figcaption>
              </figure>
            </a>
          </div>
          <div class="swiper-slide">
            <a data-pswp-item href="./images/Image 21.jpg" data-pswp-width="2000" data-pswp-height="1334">
              <figure class="slide-card">
                <img data-preload src="./images/Image 21.jpg" alt="Engagement session by the sea" />
                <figcaption class="slide-caption">Seaside engagement</figcaption>
              </figure>
            </a>
          </div>
          <div class="swiper-slide">
            <a data-pswp-item href="./images/Image 23.jpg" data-pswp-width="2000" data-pswp-height="1334">
              <figure class="slide-card">
                <img data-preload src="./images/Image 23.jpg" alt="Bridal portrait with bouquet" />
                <figcaption class="slide-caption">Floral grace</figcaption>
              </figure>
            </a>
          </div>
          <div class="swiper-slide">
            <a data-pswp-item href="./images/Image 7.jpg" data-pswp-width="2000" data-pswp-height="1334">
              <figure class="slide-card">
                <img data-preload src="./images/Image 7.jpg" alt="Elegant table setting" />
                <figcaption class="slide-caption">The details</figcaption>
              </figure>
            </a>
          </div>
        </div>
        <div class="swiper-button-prev" aria-label="Previous"></div>
        <div class="swiper-button-next" aria-label="Next"></div>
        <div class="swiper-pagination" aria-hidden="true"></div>
      </div>
    </section>

    <!-- Film (Video Reel) -->
    <section class="section film" id="film">
      <div class="container">
        <div class="section-head">
          <h2 data-splitting>Wedding film reel</h2>
          <p>Motion woven with music — a short reel featuring favorite moments.</p>
        </div>
        <div class="player-wrapper">
          <video id="reel" playsinline controls preload="metadata" poster="https://images.unsplash.com/photo-1519744792095-2f2205e87b6f?q=80&w=1600&auto=format&fit=crop">
            <source src="./4ever.mp4" type="video/mp4" />
          </video>
          <div class="video-fallback" id="videoFallback" aria-hidden="true">
            <i class="ri-alert-line"></i>
            Video couldn’t load. <a href="./4ever.mp4" download>Download 4ever.mp4</a>
          </div>
        </div>
      </div>
    </section>

    <!-- Highlights Masonry -->
    <section class="section highlights" id="highlights">
      <div class="container">
        <div class="section-head">
          <h2 data-splitting>Highlights</h2>
          <p>A few frames we love — spontaneous, cinematic, and full of life.</p>
        </div>
        <div class="masonry-grid">
          <div class="masonry-sizer"></div>
          <div class="masonry-item"><figure class="highlight-card"><img src="./images/Image 2.jpg" alt=""></figure></div>
          <div class="masonry-item"><figure class="highlight-card"><img src="./images/Image 3.jpg" alt=""></figure></div>
          <div class="masonry-item"><figure class="highlight-card"><img src="./images/Image 4.jpg" alt=""></figure></div>
          <div class="masonry-item"><figure class="highlight-card"><img src="./images/Image 7.jpg" alt=""></figure></div>
          <div class="masonry-item"><figure class="highlight-card"><img src="./images/Image 21 (1).jpg" alt=""></figure></div>
          <div class="masonry-item"><figure class="highlight-card"><img src="./images/Image 23.jpg" alt=""></figure></div>
        </div>
      </div>
    </section>

    <!-- Story -->
    <section id="story" class="section story">
      <div class="container">
        <div class="grid">
          <div>
            <div class="section-head">
              <h2 data-splitting>Poetry in light</h2>
              <p>We believe in honest storytelling, cinematic pacing, and the alchemy of color and contrast. Our approach is calm and artful — directing lightly, noticing everything, and giving you space to feel.</p>
            </div>
            <div class="cta">
              <a class="btn btn-primary" href="#contact"><i class="ri-sparkling-line"></i> Start a conversation</a>
              <a class="btn btn-ghost" href="#portfolio"><i class="ri-image-add-line"></i> See more work</a>
            </div>
          </div>
          <div class="frame">
            <img src="./images/Image 8.jpg" alt="Cinematic bridal portrait"/>
          </div>
        </div>
      </div>
    </section>

    <!-- Contact CTA -->
    <section id="contact" class="section contact">
      <div class="container">
        <div class="cta-grid">
          <h3 data-splitting>Let’s create something unforgettable.</h3>
          <p class="sub">We take on a limited number of weddings per year to ensure an intentional, artful experience. Share your date and vision, and we’ll craft a bespoke proposal.</p>
          <div class="cta">
            <a class="btn btn-primary" href="mailto:hello@4everevents.example?subject=Wedding%20Enquiry%20—%204everevents%20%E2%99%BE"><i class="ri-mail-line"></i> hello@4everevents.example</a>
            <a class="btn btn-ghost" href="tel:+1234567890"><i class="ri-phone-line"></i> +1 (234) 567-890</a>
          </div>
          <!-- Counters: simple stats to build trust -->
          <div class="cta" style="gap:18px; flex-wrap: wrap; justify-content:center; margin-top: 8px;">
            <div style="min-width:180px; background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08); border-radius:14px; padding:12px 16px;">
              <div style="font-size:12px; color:var(--muted); letter-spacing:.12em; text-transform:uppercase;">Weddings Captured</div>
              <div id="statWeddings" style="font-size:28px; font-weight:800;">0</div>
            </div>
            <div style="min-width:180px; background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08); border-radius:14px; padding:12px 16px;">
              <div style="font-size:12px; color:var(--muted); letter-spacing:.12em; text-transform:uppercase;">Cities Worldwide</div>
              <div id="statCities" style="font-size:28px; font-weight:800;">0</div>
            </div>
            <div style="min-width:180px; background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08); border-radius:14px; padding:12px 16px;">
              <div style="font-size:12px; color:var(--muted); letter-spacing:.12em; text-transform:uppercase;">Years Experience</div>
              <div id="statYears" style="font-size:28px; font-weight:800;">0</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer>
      <div class="container footer-grid">
        <div>© <span id="year"></span> 4everevents <span aria-hidden="true">♾️</span></div>
        <div class="social" aria-label="Social links">
          <a href="#" aria-label="Instagram"><i class="ri-instagram-line"></i></a>
          <a href="#" aria-label="TikTok"><i class="ri-tiktok-line"></i></a>
          <a href="#" aria-label="YouTube"><i class="ri-youtube-line"></i></a>
        </div>
      </div>
    </footer>

    <!-- Back-to-top FAB -->
    <button id="toTop" aria-label="Back to top" title="Back to top"><i class="ri-arrow-up-line"></i></button>

    <!-- Mobile sticky CTA -->
    <div class="mobile-cta" aria-hidden="false">
      <div class="bar">
        <a href="#contact" class="btn btn-primary" style="flex:1; justify-content:center"><i class="ri-calendar-event-line"></i> Book now</a>
        <a href="mailto:hello@4everevents.example" class="btn btn-ghost" style="flex:1; justify-content:center"><i class="ri-mail-line"></i> Email</a>
      </div>
    </div>

    <!-- (PhotoSwipe will attach to anchors; no extra markup needed) -->

    <!-- Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/imagesloaded@5/imagesloaded.pkgd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/splitting@1.0.6/dist/splitting.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@studio-freight/lenis@1.0.45/bundled/lenis.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanilla-tilt@1.8.1/dist/vanilla-tilt.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/countup.js@2.6.2/dist/countUp.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lottie-web@5.12.2/build/player/lottie.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@5.4.4/dist/photoswipe.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/plyr@3.7.8/dist/plyr.css">
    <script src="https://cdn.jsdelivr.net/npm/plyr@3.7.8/dist/plyr.polyfilled.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js"></script>

    <!-- App -->
    <script>
      // Year
      document.getElementById('year').textContent = new Date().getFullYear();

      // Mobile nav toggle
      const navToggle = document.getElementById('navToggle');
      const navMenu = document.getElementById('navMenu');
      navToggle?.addEventListener('click', () => {
        const expanded = navToggle.getAttribute('aria-expanded') === 'true';
        navToggle.setAttribute('aria-expanded', String(!expanded));
        navMenu.classList.toggle('show');
      });
      navMenu?.querySelectorAll('a').forEach(a => a.addEventListener('click', () => {
        navMenu.classList.remove('show');
        navToggle?.setAttribute('aria-expanded', 'false');
      }));

      // Sticky header state
      const header = document.getElementById('header');
      const setHeaderState = () => {
        if (window.scrollY > 12) header.classList.add('is-scrolled'); else header.classList.remove('is-scrolled');
      };
      setHeaderState();
      window.addEventListener('scroll', setHeaderState, { passive: true });

      // Splitting (guarded)
      if (window.Splitting) { try { Splitting(); } catch(e) {} }

      // Lenis smooth scroll + ScrollTrigger sync (guarded)
      let lenis = null;
      if (window.Lenis) {
        try {
          lenis = new Lenis({
            duration: 1.15,
            smoothWheel: true,
            smoothTouch: false,
            easing: t => Math.min(1, 1.001 - Math.pow(2, -10 * t))
          });
          function raf(time) { lenis.raf(time); requestAnimationFrame(raf); }
          requestAnimationFrame(raf);
        } catch(e) {}
      }
      if (window.gsap && window.ScrollTrigger) {
        gsap.registerPlugin(ScrollTrigger);
        if (lenis && lenis.on) { lenis.on('scroll', ScrollTrigger.update); }
      }

      // Top scroll progress bar + back-to-top
      const scrollbar = document.getElementById('scrollbar');
      const toTop = document.getElementById('toTop');
      const onScrollUX = () => {
        const max = Math.max(1, document.documentElement.scrollHeight - window.innerHeight);
        const pct = (window.scrollY / max) * 100;
        if (scrollbar) scrollbar.style.width = pct + '%';
        if (toTop) {
          if (window.scrollY > 480) toTop.classList.add('show'); else toTop.classList.remove('show');
        }
      };
      window.addEventListener('scroll', onScrollUX, { passive: true });
      toTop?.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));

      // Preloader progress via imagesLoaded
      const preloader = document.getElementById('preloader');
      const bar = preloader.querySelector('.progress-bar');
      const text = preloader.querySelector('.progress-text');
      const wrap = preloader.querySelector('.progress-wrap');
      const updateProgress = (v) => {
        const pct = Math.min(100, Math.max(0, Math.round(v * 100)));
        bar.style.width = pct + '%';
        text.textContent = pct + '%';
        wrap.setAttribute('aria-valuenow', String(pct));
      };

      let total = 1, loaded = 0; // keep it lean: progress counts only key visuals
      updateProgress(0);
      const candidates = document.querySelectorAll('img[data-preload]');
      if (candidates.length) {
        total = candidates.length;
        candidates.forEach(img => {
          if (img.complete) { loaded++; updateProgress(loaded / total); return; }
          img.addEventListener('load', () => { loaded++; updateProgress(loaded / total); if (loaded >= total) finishPreloader(); }, { once: true });
          img.addEventListener('error', () => { loaded++; updateProgress(loaded / total); if (loaded >= total) finishPreloader(); }, { once: true });
        });
      } else if (window.imagesLoaded) {
        // fallback: count all if no preload markers
        const imgLoad = imagesLoaded(document.body);
        total = imgLoad.images?.length || 1;
        imgLoad.on('progress', () => { loaded++; updateProgress(loaded / Math.max(1, total)); });
        imgLoad.on('always', () => finishPreloader());
      } else {
        window.addEventListener('load', () => finishPreloader(true));
      }
      // Hard stop fallback no matter what
      setTimeout(() => finishPreloader(true), 3500);
      window.addEventListener('load', () => finishPreloader(true));

      function finishPreloader(force = false) {
        if (!preloader) return;
        if (preloader.dataset.done) return;
        if (!force && loaded < Math.ceil(total * 0.6)) return; // wait for most images
        preloader.dataset.done = '1';
        updateProgress(1);
        if (!window.gsap) { preloader.remove(); return; }
        const tl = gsap.timeline({ defaults: { overwrite: 'auto' } });
        const preAnims = [];
        const lottieEl = preloader.querySelector('.lottie-wrap');
        const svgEl = preloader.querySelector('.infinity-wrap');
        if (lottieEl) preAnims.push({ el: lottieEl });
        if (svgEl) preAnims.push({ el: svgEl });
        preAnims.forEach((p, idx) => tl.to(p.el, { y: -8, opacity: 0, duration: .35, ease: 'power2.out' }, idx === 0 ? '>' : '<'))
          .to(preloader.querySelector('.logo-mark'), { y: -10, opacity: 0, duration: .35, ease: 'power2.out' }, '<')
          .to(preloader, { opacity: 0, duration: .45, ease: 'power2.out', onComplete: () => preloader.remove() });

        // Hero intro
        introAnimations();
      }

      // Hero + section reveals
      function introAnimations() {
        const headlineChars = document.querySelectorAll('.headline .char');
        gsap.set(headlineChars, { yPercent: 120, rotate: 6, opacity: 0 });
        gsap.to(headlineChars, { yPercent: 0, rotate: 0, opacity: 1, duration: .9, ease: 'power3.out', stagger: { each: 0.015, from: 'start' } });
        gsap.from('.tagline', { y: 18, opacity: 0, duration: .7, delay: .2, ease: 'power2.out' });
        gsap.from('.cta .btn', { y: 18, opacity: 0, duration: .7, delay: .28, ease: 'power2.out', stagger: .06 });

        // Hero parallax
        const heroImg = document.querySelector('.hero-media img');
        if (heroImg && window.gsap && window.ScrollTrigger) {
          gsap.to(heroImg, { scale: 1.0, ease: 'none', scrollTrigger: { trigger: '.hero', start: 'top top', end: 'bottom top', scrub: 1 } });
        }
        onScrollUX();
      }

      // Services reveal (guarded)
      if (window.gsap && window.ScrollTrigger) {
        gsap.utils.toArray('.service-card').forEach((el, i) => {
          gsap.set(el, { y: 26, opacity: 0 });
          ScrollTrigger.create({
            trigger: el,
            start: 'top 80%',
            once: true,
            onEnter: () => gsap.to(el, { y: 0, opacity: 1, duration: .7, ease: 'power2.out', delay: (i % 3) * 0.06 })
          });
        });
      }

      // (Removed) legacy shine tracking for old cards

      // Lightweight card interactions (pointer tilt + shine + keyboard accessibility)
      // (Removed) legacy card tilt interactions

      // Services: background reveal and sticky viewport
      (function initServicesReveal(){
        const section = document.querySelector('.services');
        const list = document.querySelector('.service-list');
        const imgs = Array.from(document.querySelectorAll('.service-viewport .img'));
        const caption = document.querySelector('.service-viewport .caption');
        if (!section || !list || !imgs.length) return;

        section.classList.add('is-active');
        const items = Array.from(list.querySelectorAll('.service-item'));
        const setActive = (idx) => {
          items.forEach((b,i)=> b.setAttribute('aria-selected', String(i===idx)));
          imgs.forEach((im,i)=> im.classList.toggle('is-active', i===idx));
          const bg = items[idx]?.dataset.bg;
          if (bg) section.style.setProperty('--services-bg', `url('${bg}')`);
          if (caption) {
            const t = items[idx]?.dataset.title || '';
            const d = items[idx]?.dataset.desc || '';
            const tEl = caption.querySelector('.t');
            const dEl = caption.querySelector('.d');
            if (tEl) tEl.textContent = t;
            if (dEl) dEl.textContent = d;
          }
        };
        let current = 0; setActive(current);

        items.forEach((btn, idx) => {
          btn.addEventListener('mouseenter', ()=> setActive(idx));
          btn.addEventListener('focus', ()=> setActive(idx));
          btn.addEventListener('click', ()=> setActive(idx));
          btn.addEventListener('keydown', (e)=>{
            if (e.key==='ArrowDown' || e.key==='ArrowRight') { e.preventDefault(); setActive(Math.min(items.length-1, idx+1)); items[Math.min(items.length-1, idx+1)].focus(); }
            if (e.key==='ArrowUp' || e.key==='ArrowLeft') { e.preventDefault(); setActive(Math.max(0, idx-1)); items[Math.max(0, idx-1)].focus(); }
          });
        });
      })();

      // Swiper gallery
      const swiper = window.Swiper ? new Swiper('#gallerySwiper', {
        effect: 'coverflow',
        grabCursor: true,
        centeredSlides: true,
        slidesPerView: 'auto',
        loop: true,
        coverflowEffect: { rotate: 8, stretch: 0, depth: 180, modifier: 1.2, slideShadows: false },
        navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' },
        pagination: { el: '.swiper-pagination', clickable: true },
        autoplay: { delay: 2600, disableOnInteraction: false },
        breakpoints: {
          768: { slidesPerView: 2 },
          1024: { slidesPerView: 3 }
        }
      }) : null;

      // Plyr video
      if (window.Plyr) {
        try {
          const player = new Plyr('#reel', { controls: ['play','progress','mute','volume','fullscreen'] });
          // reveal fallback UI if source error
          const video = document.getElementById('reel');
          const fb = document.getElementById('videoFallback');
          const showFB = () => { if (fb) fb.style.display = 'flex'; };
          video.addEventListener('error', showFB, { once: true });
          video.addEventListener('stalled', showFB, { once: true });
          // If no duration within a few seconds, assume load issue
          setTimeout(() => { if (!video.duration || isNaN(video.duration)) showFB(); }, 2500);
        } catch(_) {}
      }

      // Masonry Highlights
      if (window.Masonry) {
        try {
          new Masonry(document.querySelector('.masonry-grid'), {
            itemSelector: '.masonry-item',
            columnWidth: '.masonry-sizer',
            percentPosition: true,
            transitionDuration: '0.2s'
          });
        } catch(_) {}
      }

      // Blur-up and lazy hints
      const allImgs = document.querySelectorAll('.hero-media img, .slide-card img, .story .frame img');
      allImgs.forEach(img => {
        img.loading = img.closest('#gallerySwiper') ? 'lazy' : img.loading || 'eager';
        if (!img.classList.contains('blur-up')) img.classList.add('blur-up');
        if (img.complete) {
          requestAnimationFrame(() => img.classList.add('is-loaded'));
        } else {
          img.addEventListener('load', () => img.classList.add('is-loaded'), { once: true });
        }
      });

      // Scroll spy for active nav links
      const sectionLinks = Array.from(document.querySelectorAll('.nav a[href^="#"]'));
      const sectionTargets = sectionLinks.map(a => {
        const id = a.getAttribute('href').slice(1);
        const el = document.getElementById(id);
        return { a, el };
      }).filter(s => s.el);
      const updateActive = () => {
        let current = null;
        for (const s of sectionTargets) {
          const r = s.el.getBoundingClientRect();
          if (r.top <= 120 && r.bottom >= 120) { current = s; break; }
        }
        sectionTargets.forEach(s => s.a.classList.toggle('active', current && s.el === current.el));
      };
      window.addEventListener('scroll', updateActive, { passive: true });
      updateActive();

      // Close mobile menu on outside click
      document.addEventListener('click', (e) => {
        if (!navMenu?.classList.contains('show')) return;
        if (navMenu.contains(e.target) || navToggle?.contains(e.target)) return;
        navMenu.classList.remove('show');
        navToggle?.setAttribute('aria-expanded', 'false');
      });

      // Story section reveal (guarded)
      if (window.gsap && window.ScrollTrigger) {
        gsap.utils.toArray('#story .grid > *').forEach((el, i) => {
          gsap.set(el, { y: 28, opacity: 0 });
          ScrollTrigger.create({
            trigger: el,
            start: 'top 80%',
            once: true,
            onEnter: () => gsap.to(el, { y: 0, opacity: 1, duration: .7, ease: 'power2.out', delay: i * 0.12 })
          });
        });
      }

      // Contact section reveal (guarded)
      if (window.gsap && window.ScrollTrigger) {
        gsap.utils.toArray('#contact .cta-grid > *').forEach((el, i) => {
          gsap.set(el, { y: 22, opacity: 0 });
          ScrollTrigger.create({
            trigger: '#contact', start: 'top 75%', once: true,
            onEnter: () => gsap.to(el, { y: 0, opacity: 1, duration: .6, ease: 'power2.out', delay: i * 0.08 })
          });
        });
      }

      // CountUp stats on enter
      if (window.CountUp && window.gsap && window.ScrollTrigger) {
        const stats = [
          { id: 'statWeddings', endVal: 320 },
          { id: 'statCities', endVal: 28 },
          { id: 'statYears', endVal: 10 }
        ];
        stats.forEach((s, idx) => {
          const el = document.getElementById(s.id);
          if (!el) return;
          const trigger = document.getElementById('contact');
          ScrollTrigger.create({
            trigger,
            start: 'top 80%',
            once: true,
            onEnter: () => {
              const cu = new CountUp.CountUp(s.id, s.endVal, { duration: 1.6, separator: ',', easingFn: (t,b,c,d)=>b+c*(t/=d)*t*(3-2*t) });
              cu.start();
            }
          });
        });
      }
    </script>

    <!-- PhotoSwipe Lightbox Init (module) -->
    <script type="module">
      import PhotoSwipeLightbox from 'https://cdn.jsdelivr.net/npm/photoswipe@5.4.4/dist/photoswipe-lightbox.esm.min.js';
      const lightbox = new PhotoSwipeLightbox({
        gallery: '#gallerySwiper',
        children: 'a[data-pswp-item]',
        pswpModule: () => import('https://cdn.jsdelivr.net/npm/photoswipe@5.4.4/dist/photoswipe.esm.min.js')
      });
      lightbox.init();
    </script>

    <!-- Lottie Init -->
    <script>
      (function initLottie(){
        if (!window.lottie) return;
        const container = document.getElementById('lottieLoader');
        if (!container) return;
        try {
          const anim = lottie.loadAnimation({
            container,
            renderer: 'svg',
            loop: true,
            autoplay: true,
            // A small public infinity loader JSON; if it fails, our SVG fallback remains
            path: 'https://assets10.lottiefiles.com/packages/lf20_UJNc2t.json'
          });
          anim.setSpeed(1.1);
          // Hide SVG fallback if lottie started
          const svgFallback = container.parentElement?.querySelector('[data-fallback]');
          if (svgFallback) svgFallback.style.display = 'none';
        } catch(_) {}
      })();
    </script>
  </body>
</html>


